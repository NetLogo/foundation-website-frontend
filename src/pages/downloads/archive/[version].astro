---
import versions from './versions.json';

declare global {
	interface Window {
		dataLayer: any[];
	}
}

const { version } = Astro.params;

export function getStaticPaths() {
	return versions.map((versionData) => ({
		params: { version: versionData.version },
	}));
}

const allHtmlFiles = await import.meta.glob('./html/*/index.html', { eager: true, as: 'raw' });
const legacyHTML = allHtmlFiles[`./html/${version}/index.html`];
---

<head>
	<script async src='https://www.googletagmanager.com/gtag/js?id=G-5L2W88N305'></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(...args: any[]) {
			window.dataLayer.push(args);
		}
		gtag('js', new Date());
		gtag('config', 'G-5L2W88N305');
	</script>
</head>

<Fragment set:html={legacyHTML} />
