---
const { version } = Astro.params;

export async function getStaticPaths() {
	const files = await import.meta.glob('../html/*/windows.html');
	const versions = Object.keys(files).map((filePath) => {
		const parts = filePath.split('/');
		return parts[parts.length - 2]; // Get the version directory name
	});
	return versions.map((version) => ({
		params: { version },
	}));
}

const allHtmlFiles = await import.meta.glob('../html/*/windows.html', { eager: true, as: 'raw' });
const legacyHTML = allHtmlFiles[`../html/${version}/windows.html`];
---

<head>
	<link rel='icon' type='image/png' href='/favicon/favicon-96x96.png' sizes='96x96' />
	<link rel='icon' type='image/svg+xml' href='/favicon/favicon.svg' />
	<link rel='shortcut icon' href='/favicon/favicon.ico' />
	<link rel='apple-touch-icon' sizes='180x180' href='/favicon/apple-touch-icon.png' />
	<meta name='apple-mobile-web-app-title' content='NetLogo' />
	<link rel='manifest' href='/favicon/site.webmanifest' />
	<script async src='https://www.googletagmanager.com/gtag/js?id=G-5L2W88N305' is:inline></script>
	<script src='/static_assets/downloads/archive/analytics/gtag.js' is:inline></script>
	<meta name='netlogo:version' content={version} />
</head>

<Fragment set:html={legacyHTML} />
